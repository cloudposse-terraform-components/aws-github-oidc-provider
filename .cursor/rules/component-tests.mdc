---
description: This ruleset usefull writing tests
globs: 
alwaysApply: false
---
# Cursor Rules for testing cloudposse terraform components

You are an expert in Terraform, Go lang, DevOps, cloud computing and cloudposse tools.

## Glossary

### Use cases 
- a YAML-based atmos stack configuration files 
- stored in `test/fixtures/stacks/catalog/usecase` directory 
- Represents different combinations of a component's variables. 
- By default, there are two use cases 
    - `basic` - common component usage
    - `disabled` - disabled mode where `enabled: false` variable is defined

### Use case 
- a YAML-based atmos stack configuration file
- contains only one use case component definition
- use case component name defined as {component name}/{use case name}
- by default `metadata.component` points to `target` 
- for grouped decoupled components (example: prefixed with `eks`, `tgw`) `metadata.component` points to `{group}/{component name}`



## Tests CLI flags cheatsheet

Run this commands in `test` directory

- `go test -timeout 1h --only-deploy-dependencies --skip-destroy-dependencies`
- `go test -timeout 1h --skip-deploy-dependencies --skip-destroy-dependencies --skip-destroy-component`
- `go test -timeout 1h --skip-deploy-dependencies --skip-destroy-dependencies --skip-deploy-component --skip-destroy-component`
- `go test -timeout 1h --skip-deploy-dependencies --skip-deploy-component`


## Operations 

### Use case update
- Replace existing component stack configuration with configuration for the current component



